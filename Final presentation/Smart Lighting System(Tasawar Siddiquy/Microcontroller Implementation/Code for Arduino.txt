#include <LiquidCrystal.h>

LiquidCrystal lcd(10, 9, 6, 5, 3, 2);
int Lightsensor = A1;

 const int lightson = 0 ;
int light = 12;
int light2 = 13;
const int dimmerlights = 7; 
const int lightsoff = 8;

int Motionsensor = 4;
int state = lightsoff;  
 
void setup()
{
  pinMode(A1, INPUT);
  pinMode(4, INPUT);
  pinMode(A2, INPUT);

  pinMode(12, OUTPUT);
   pinMode(13, OUTPUT);
  lcd.begin(16, 2);
  lcd.print("Lights Off");
   lcd.setCursor(0, 1);
  lcd.print("No Motion ");
  
  
}
void loop()
  
{
 int state = lightsoff; 
  Lightsensor = analogRead(A1);
  Motionsensor = digitalRead(4);
                                         
light = digitalRead(12);
light2 = digitalRead(13);  
  
 
  switch(state){
    
     case lightsoff:                 // state lightsoff
    
          Lightoff();
    break;
    case lightson:                 //state lightson
    
      Lightson();
    
    break;
    
     case dimmerlights:           //state dimmerlights
   
      Dimmerlights();
    
 
    break;
     
    

  }
}
   
    
       

  
        
      
  



     void Lightoff(){
       if (Motionsensor == HIGH){
       if (Lightsensor < 400){
         state = lightson;
       Lightson();                     //Lightsoff Definition
         
       }
      else if (Lightsensor < 800 && Lightsensor > 400 ){
          state = dimmerlights;
        Dimmerlights();
        
      }
         else{
           setup();
         }
           
   } 
  
}
void Lightson(){
  

        if (Lightsensor < 400){
          state = lightson;
   lcd.begin(16, 2);
  lcd.print("Motion Detected");
     digitalWrite(13, HIGH);
  lcd.setCursor(0, 1);
  lcd.print("Lights on");             //  Lights on Definition
      delay(3000);
       digitalWrite(13, LOW);
  setup();
   
        }
  
   else if (Lightsensor < 800 && Lightsensor > 400 ){
   
   state=dimmerlights;
     
    Dimmerlights();
   }
     
 }




  void Dimmerlights(){
     if (Lightsensor < 800 && Lightsensor > 400 ){
   state = dimmerlights;
       lcd.begin(16, 2);
    
    lcd.print("Motion Detected");
       digitalWrite(12, HIGH);
    
        lcd.setCursor(0, 1);
  lcd.print("Dimmer lights");           // Dimmer lights Definition
      delay(3000);
      digitalWrite(12, LOW);
    setup();
    
    
  }
   else if (Lightsensor < 400){
          state = lightson;
   Lightson();
    }
   
      }